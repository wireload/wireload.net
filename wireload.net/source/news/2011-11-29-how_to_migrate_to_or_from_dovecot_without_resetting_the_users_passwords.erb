---
title: How to migrate to or from Dovecot without resetting the users' passwords
authors: Viktor Petersson
wordpress_id: 897
wordpress_url: http://wireload.net/2011/11/how-to-migrate-to-or-from-dovecot-without-reseting-the-users-passwords/
date: 2011-11-29 07:46:55
tags: dovecot, imap, tips, yippiemove
---
<img src="http://wireload.net/wp-content/uploads/2011/11/dovecot.png" alt="" title="dovecot" width="125" height="60" class="alignright size-full wp-image-911" />Let's face it -- having to reset the users' password when doing an e-mail migration is a big pain-point. End-users don't like having their passwords changed, and the tech-folks don't like the storm of support calls from frustrated users who can't get to their email. That is on top of the issues that might arise when users changes their password from the password the admin changed it to mid-migration.<br/>All in all, it's a pain. Luckily, there are ways around this for some email services and servers. <a href="http://www.dovecot.org">Dovecot</a> is one of them. Unfortunately Dovecot isn't configured to support this by default (in most systems), but in this article we'll tell you how to enable it.<br/><!--more--><br/><h3>Configuring Dovecot</h3><br/>The trick is to create a master-user and set "auth_master_user_separator". This <a href="http://wiki.dovecot.org/Authentication/MasterUsers">page</a> on Dovecot's wiki walks you through the process. <br/>Once you've configured this, you should be able to authenticate to any user's mailbox using the master-user. To verify that you can login, open a connection to your IMAP-server.<br/><pre lang="bash"><br/>$ openssl s_client -crlf -connect mail.server.com:993<br/></pre><br/>You should now be able to login to any user's account using the master-user. For instance, if we want to login to the user 'foobar' using the admin account 'admin' with the password 'myPass', we would enter:<br/><pre lang="bash"><br/>. LOGIN "foobar*admin" myPass<br/></pre><br/>(we also assume that auth_master_user_separator is set to "*")<br/><h3>Using YippieMove</h3><br/>Luckily, the hard part is over. Using the master-user to authenticate against a Dovecot server in <a href="http://www.yippiemove.com">YippieMove</a> is really easy  and it works both for single-user migrations as well as batch migrations.<br/>All you need to do is to append "*master-user" to the end of the username, and use the master user-password. Again, if the example above wasn't clear. If you want to connect to the IMAP account 'jdoe', and your master user is 'admin', you'd use 'jdoe*admin' as the username in YippieMove, along with the password for 'admin'. <br/>Click <a href="http://www.yippiemove.com">here</a> to get started.<br/>Got any questions? <a href="http://support.yippiemove.com">Let us know</a>. 